{% load static %}
<nav 
  class="navbar navbar-light navbar-expand-lg az-navbar py-3">
  <div class="container">
    <a class="navbar-brand" href="{% url 'posts:index' %}">
      <img 
        src="{% static 'img/logo.png' %}" 
        class="logo-img d-inline-block align-top border border-orange" 
        alt=""
      >
      <div class="d-none d-lg-inline text-black">
        <span class="text-red">Ya</span>tube
      </div>
    </a>

    <button 
      class="navbar-toggler az-burger" 
      type="button" 
      data-bs-toggle="collapse" 
      data-bs-target="#navbarToggler01" 
      aria-controls="navbarToggler01" 
      aria-expanded="false" 
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse d-lg-block w-100" id="navbarToggler01">
      <ul class="row nav flex-column  align-items-center flex-lg-row 
                 g-3 text-center">
        {% with request.resolver_match.view_name as view_name %} 
        <li class="nav-item col-auto"> 
          <a 
            class="nav-link
                   {% if view_name == 'about:author' %}active{% endif %}" 
            href="{% url 'about:author' %}"
          >Об авторе</a>
        </li>
        <li class="nav-item col-auto">
          <a 
            class="nav-link {% if view_name == 'about:tech' %}active{% endif %}" 
            href="{% url 'about:tech' %}"
          >Технологии</a>
        </li>
        {% if request.user.is_authenticated %}
        <li class="nav-item col-auto"> 
          <a 
            class="nav-link {% if view_name == 'posts:post_create' %}
                              active
                            {% endif %}" 
            href="{% url 'posts:post_create' %}"
          >Новая запись</a>
        </li>
        <li class="nav-item col-auto ms-lg-auto"> 
          <a 
            class="nav-link 
                  {% if view_name == 'users:password_change' %}active{% endif %}" 
            href="{% url 'users:password_change' %}"
          >Изменить пароль</a>
        </li>
        <li class="nav-item col-auto"> 
          <a class="nav-link 
                    {% if view_name == 'users:logout' %}active{% endif %}"
             href="{% url 'users:logout' %}"
          >Выйти</a>
        </li>
        <li class="nav-item col-auto">
          <span class="nav-link">{{ user.username }}</span>
        </li>
        {% else %}
        <li class="nav-item col-auto ms-lg-auto"> 
          <a class="nav-link btn az-btn az-btn-color
                    {% if view_name == 'users:login' %}active{% endif %}"
             href="{% url 'users:login' %}">
            Войти
          </a>
        </li>
        <li class="nav-item col-auto"> 
          <a class="nav-link btn az-btn az-btn-color
                    {% if view_name == 'users:signup' %}active{% endif %}"
             href="{% url 'users:signup' %}">
            Регистрация
          </a>
        </li>
        {% endif %}
        {% endwith %} 
      </ul>
    <div>
  </div>
</nav>      
